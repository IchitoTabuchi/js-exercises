# 問題 15.11-15.18

書籍の 15.12 の説明には以下のような説明がある。

> 本章で紹介するクライアントサイドストレージのいずれも、暗号化機能を備えていません。保存したデータは、ユーザのデバイス上に暗号化されていない形式で存在します。

では、Web アプリケーションがユーザの機密情報をセキュアに扱うためにはどのようなことが必要になるか記述しなさい。ブラウザでの対応に限らず、Web アプリケーション全般を対象として考えること。

---

## 解答

クライアントサイドストレージは暗号化されないため、機密情報はサーバー側で暗号化して保存し、クライアント側には保存しない。どうしても必要な場合でも短命トークンをHTTPOnly Cookieで保持するに留め、通信はHTTPSで暗号化する。

### 1. データ保存場所の選択

- パスワード、クレジットカード情報、個人識別番号などは必ずサーバー側のデータベースのみで管理する。
- クライアント側にはセッショントークンやアクセストークンなど、最小限の情報のみを保持する。
- やむを得ず保存する場合は HTTPOnly Cookie を使用して、XSS攻撃対策を行う。

### 2. 通信の暗号化

- 全ての通信をHTTPSで行う。
- HSTSヘッダーでHTTPSの使用を強制する。

### 3. サーバー側での暗号化

- 安全性の高い暗号化アルゴリズムを使用する。

### 4. アクセス制御

- 短命のアクセストークンを使用し、セッションタイムアウトの設定を行う。
