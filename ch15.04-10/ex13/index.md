# hashbang が使用されていた理由

初期の検索エンジンが SPA をクロールできるようにするため。

# 前提知識

1. SPA (Single Page Application)
   ウェブアプリケーションの一形態で、ページ全体を再読み込みせずに動的にコンテンツを更新する。ユーザーが操作するたびにサーバーから新しいページを取得するのではなく、JavaScript を使用してクライアント側でコンテンツを生成・更新する。

2. クローラ
   検索エンジンがウェブページを巡回して情報を収集するプログラム。SEO (Search Engine Optimization) において重要な役割を果たす。

3. インデックス
   検索エンジンが収集したウェブページの内容を整理・保存し、検索クエリに対して迅速に結果を返すためのデータベース。

# 詳細

SPA は通常、JavaScript を使用して動的にコンテンツを生成するが、初期の検索エンジンは JavaScript を十分に実行できなかったため、クローラが動的に生成されたコンテンツを正しくインデックスに登録できなかった。
この問題を解決するために、Google は 2009 年に hashbang (#!) を使用した URL 構造を導入した。hashbang は、URL のフラグメント部分に特定のパターンを追加することで、クローラに対して動的コンテンツの存在を示す方法である。 例えば、URL が `http://example.com/#!page=1` の場合、クローラは `?_escaped_fragment_=page=1` のように変換してアクセスし、サーバー側で動的コンテンツを生成して返すことができた。
この方法により、検索エンジンは SPA の動的コンテンツを正しくインデックスに登録できるようになった。
しかし、現在では、HTML5 History API の pushState, popState を利用することで、hashbang を使用せずにクリーンな URL 構造を維持しつつ、SPA のコンテンツを検索エンジンに提供できるようになっている。
