# DynamicSizeArrayの計算量

`DynamicSizeArray`では、配列サイズが$2^k$のときにpush操作を行った際に再配置が発生する。

`push`を$n$回行ったとき、配列サイズは$n$以上となるので、再配置の回数$k$のオーダーは$2^k=n$をもとに計算でき、$O(k) = log(n)$となる。

ここで、`push`を$n$回行うまでの合計時間計算量を求める。

簡単のため、DynamicSizeArrayの初期サイズを0とすると、k回目の再配置後の要素数は$2^{k-1}$であるから、再配置のコピー回数の総和は、$S = 2^0 + 2^1 + 2^2 + ... + 2^{log(n-1)}$で求められる。

これは等比級数の和であるから、$S = 2^0*(2^{log(n)}-1)/(2-1) = 2^{log(n)}-1 = n-1$となる。

また、再配置の発生の有無に関わらず、`push`される要素を書き込む処理が毎回発生するため、合計計算量は$S+n = 2n-1$となる。

従って、平均計算量は$O((2n-1)/n) = O(1)$となる。

# copyAとcopyBの計算量の比較

初めに、`copyA`は`result`が初めから要素数$n$の配列として用意されているため、再配置が発生しない。

$O(1)$の代入が$n$回行われるから、`copyA`の計算量は$O(n)$である。

次に`copyB`は、`DynamicSizeArray`で$n$回`push`を行った際の計算量となるため、$O(n)$となる。

従って、`copyA`と`copyB`の時間計算量のオーダーは同じであると言える。
