# 結論

正規表現`^(a|aa)+$`で、文字列`"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa!"`に対するマッチングを行うと、バックトラック爆発が発生して実行時間が異常に長くなる。

# 理由

正規表現`^(a|aa)+$`は、`a`または`aa`を1回以上繰り返すパターンである。

正規表現エンジンはまず文字列の先頭から`a`または`aa`にマッチさせようとする。

`+`は`a`または`aa`を「貪欲な繰り返し」でマッチングさせる。すなわち、最初は文字列全体を使って繰り返しを試みる。

しかし文字列の末尾には`!`があるため、文字列全体を`a`や`aa`に割り当てるとことはできない。

エンジンは文字列全体を見渡した推論ができないので、途中でどの`a`を`a`とし、どの`a`を`aa`とするかの選択を変更することでマッチさせることができないか全ての組み合わせを順に試す。（バックトラック）

`a`と`aa`の組み合わせは文字数に応じて指数的に増えるため、チェックにかかる時間も指数関数的に増加する（`O(2^n)`）。
